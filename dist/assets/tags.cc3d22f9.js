import{c as Ct,S as ht,C as ct,u as vt,a as kt,b as bt,d as Et,e as Ft,f as At,Z as Rt,g as zt,r as Ot,h as Pt,j as Wt,k as gt,l as Dt,m as Lt,n as Bt,i as _t}from"./index.93fd7977.js";import{f as Xt,g as Yt,o as Gt,c as Ht,u as qt,h as Zt}from"./index.edea4a24.js";import{g as Vt}from"./index.3e8c6590.js";function nt(s,r){return r=r||{},Ct(s,null,null,r.state!=="normal")}function Nt(s){var r=ht.extend(s);return ht.registerClass(r),r}function Ut(s){var r=ct.extend(s);return ct.registerClass(r),r}vt([kt,bt]);vt(Et);Nt({type:"series.wordCloud",visualStyleAccessPath:"textStyle",visualStyleMapper:function(s){return{fill:s.get("color")}},visualDrawType:"fill",optionUpdated:function(){var s=this.option;s.gridSize=Math.max(Math.floor(s.gridSize),4)},getInitialData:function(s,r){var a=Ft(s.data,{coordDimensions:["value"]}),l=new At(a,this);return l.initData(s.data),l},defaultOption:{maskImage:null,shape:"circle",keepAspect:!1,left:"center",top:"center",width:"70%",height:"80%",sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,textStyle:{fontWeight:"normal"}}});Ut({type:"wordCloud",render:function(s,r,a){var l=this.group;l.removeAll();var t=s.getData(),v=s.get("gridSize");s.layoutInstance.ondraw=function(f,i,M,R){var D=t.getItemModel(M),X=D.getModel("textStyle"),I=new Rt({style:nt(X),scaleX:1/R.info.mu,scaleY:1/R.info.mu,x:(R.gx+R.info.gw/2)*v,y:(R.gy+R.info.gh/2)*v,rotation:R.rot});I.setStyle({x:R.info.fillTextOffsetX,y:R.info.fillTextOffsetY+i*.5,text:f,verticalAlign:"middle",fill:t.getItemVisual(M,"style").fill,fontSize:i}),l.add(I),t.setItemGraphicEl(M,I),I.ensureState("emphasis").style=nt(D.getModel(["emphasis","textStyle"]),{state:"emphasis"}),I.ensureState("blur").style=nt(D.getModel(["blur","textStyle"]),{state:"blur"}),zt(I,D.get(["emphasis","focus"]),D.get(["emphasis","blurScope"])),I.stateTransition={duration:s.get("animation")?s.get(["stateAnimation","duration"]):0,easing:s.get(["stateAnimation","easing"])},I.__highDownDispatcher=!0},this._model=s},remove:function(){this.group.removeAll(),this._model.layoutInstance.dispose()},dispose:function(){this._model.layoutInstance.dispose()}});/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var a=[void 0],l="zero-timeout-message",t=function(f){var i=a.length;return a.push(f),window.postMessage(l+i.toString(36),"*"),i};return window.addEventListener("message",function(f){if(!(typeof f.data!="string"||f.data.substr(0,l.length)!==l)){f.stopImmediatePropagation();var i=parseInt(f.data.substr(l.length),36);!a[i]||(a[i](),a[i]=void 0)}},!0),window.clearImmediate=function(f){!a[f]||(a[f]=void 0)},t}()||function(a){window.setTimeout(a,0)}}());window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(a){window.clearTimeout(a)}}());var lt=function(){var r=document.createElement("canvas");if(!r||!r.getContext)return!1;var a=r.getContext("2d");return!(!a||!a.getImageData||!a.fillText||!Array.prototype.some||!Array.prototype.push)}(),ot=function(){if(!!lt){for(var r=document.createElement("canvas").getContext("2d"),a=20,l,t;a;){if(r.font=a.toString(10)+"px sans-serif",r.measureText("\uFF37").width===l&&r.measureText("m").width===t)return a+1;l=r.measureText("\uFF37").width,t=r.measureText("m").width,a--}return 0}}(),$t=function(s){if(Array.isArray(s)){var r=s.slice();return r.splice(0,2),r}else return[]},jt=function(r){for(var a,l,t=r.length;t;)a=Math.floor(Math.random()*t),l=r[--t],r[t]=r[a],r[a]=l;return r},q={},$=function(r,a){if(!lt)return;var l=Math.floor(Math.random()*Date.now());Array.isArray(r)||(r=[r]),r.forEach(function(c,e){if(typeof c=="string"){if(r[e]=document.getElementById(c),!r[e])throw new Error("The element id specified is not found.")}else if(!c.tagName&&!c.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var t={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5FAE\u8EDF\u6B63\u9ED1\u9AD4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,layoutAnimation:!0,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationStep:.1,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(a)for(var v in a)v in t&&(t[v]=a[v]);if(typeof t.weightFactor!="function"){var f=t.weightFactor;t.weightFactor=function(e){return e*f}}if(typeof t.shape!="function")switch(t.shape){case"circle":default:t.shape="circle";break;case"cardioid":t.shape=function(e){return 1-Math.sin(e)};break;case"diamond":t.shape=function(e){var n=e%(2*Math.PI/4);return 1/(Math.cos(n)+Math.sin(n))};break;case"square":t.shape=function(e){return Math.min(1/Math.abs(Math.cos(e)),1/Math.abs(Math.sin(e)))};break;case"triangle-forward":t.shape=function(e){var n=e%(2*Math.PI/3);return 1/(Math.cos(n)+Math.sqrt(3)*Math.sin(n))};break;case"triangle":case"triangle-upright":t.shape=function(e){var n=(e+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(n)+Math.sqrt(3)*Math.sin(n))};break;case"pentagon":t.shape=function(e){var n=(e+.955)%(2*Math.PI/5);return 1/(Math.cos(n)+.726543*Math.sin(n))};break;case"star":t.shape=function(e){var n=(e+.955)%(2*Math.PI/10);return(e+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-n)+3.07768*Math.sin(2*Math.PI/10-n)):1/(Math.cos(n)+3.07768*Math.sin(n))};break}t.gridSize=Math.max(Math.floor(t.gridSize),4);var i=t.gridSize,M=i-t.maskGapWidth,R=Math.abs(t.maxRotation-t.minRotation),D=Math.min(t.maxRotation,t.minRotation),X=t.rotationStep,I,C,E,B,F,P,Y;function st(c,e){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(e-c)+c).toFixed()+"%)"}switch(t.color){case"random-dark":Y=function(){return st(10,50)};break;case"random-light":Y=function(){return st(50,90)};break;default:typeof t.color=="function"&&(Y=t.color);break}var Z;typeof t.fontWeight=="function"&&(Z=t.fontWeight);var j=null;typeof t.classes=="function"&&(j=t.classes);var J=!1,N=[],K,ut=function(e){var n=e.currentTarget,o=n.getBoundingClientRect(),d,u;e.touches?(d=e.touches[0].clientX,u=e.touches[0].clientY):(d=e.clientX,u=e.clientY);var h=d-o.left,S=u-o.top,m=Math.floor(h*(n.width/o.width||1)/i),w=Math.floor(S*(n.height/o.height||1)/i);return N[m]?N[m][w]:null},ft=function(e){var n=ut(e);if(K!==n){if(K=n,!n){t.hover(void 0,void 0,e);return}t.hover(n.item,n.dimension,e)}},Q=function(e){var n=ut(e);!n||(t.click(n.item,n.dimension,e),e.preventDefault())},tt=[],mt=function(e){if(tt[e])return tt[e];var n=e*8,o=n,d=[];for(e===0&&d.push([B[0],B[1],0]);o--;){var u=1;t.shape!=="circle"&&(u=t.shape(o/n*2*Math.PI)),d.push([B[0]+e*u*Math.cos(-o/n*2*Math.PI),B[1]+e*u*Math.sin(-o/n*2*Math.PI)*t.ellipticity,o/n*2*Math.PI])}return tt[e]=d,d},et=function(){return t.abortThreshold>0&&new Date().getTime()-P>t.abortThreshold},wt=function(){return t.rotateRatio===0||Math.random()>t.rotateRatio?0:R===0?D:D+Math.round(Math.random()*R/X)*X},pt=function(e,n,o,d){var u=t.weightFactor(n);if(u<=t.minSize)return!1;var h=1;u<ot&&(h=function(){for(var it=2;it*u<ot;)it+=2;return it}());var S;Z?S=Z(e,n,u,d):S=t.fontWeight;var m=document.createElement("canvas"),w=m.getContext("2d",{willReadFrequently:!0});w.font=S+" "+(u*h).toString(10)+"px "+t.fontFamily;var A=w.measureText(e).width/h,p=Math.max(u*h,w.measureText("m").width,w.measureText("\uFF37").width)/h,y=A+p*2,k=p*3,z=Math.ceil(y/i),O=Math.ceil(k/i);y=z*i,k=O*i;var T=-A/2,g=-p*.4,x=Math.ceil((y*Math.abs(Math.sin(o))+k*Math.abs(Math.cos(o)))/i),b=Math.ceil((y*Math.abs(Math.cos(o))+k*Math.abs(Math.sin(o)))/i),W=b*i,H=x*i;m.setAttribute("width",W),m.setAttribute("height",H),w.scale(1/h,1/h),w.translate(W*h/2,H*h/2),w.rotate(-o),w.font=S+" "+(u*h).toString(10)+"px "+t.fontFamily,w.fillStyle="#000",w.textBaseline="middle",w.fillText(e,T*h,(g+u*.5)*h);var U=w.getImageData(0,0,W,H).data;if(et())return!1;for(var dt=[],G=b,_,at,rt,L=[x/2,b/2,x/2,b/2];G--;)for(_=x;_--;){rt=i;t:for(;rt--;)for(at=i;at--;)if(U[((_*i+rt)*W+(G*i+at))*4+3]){dt.push([G,_]),G<L[3]&&(L[3]=G),G>L[1]&&(L[1]=G),_<L[0]&&(L[0]=_),_>L[2]&&(L[2]=_);break t}}return{mu:h,occupied:dt,bounds:L,gw:b,gh:x,fillTextOffsetX:T,fillTextOffsetY:g,fillTextWidth:A,fillTextHeight:p,fontSize:u}},yt=function(e,n,o,d,u){for(var h=u.length;h--;){var S=e+u[h][0],m=n+u[h][1];if(S>=C||m>=E||S<0||m<0){if(!t.drawOutOfBound)return!1;continue}if(!I[S][m])return!1}return!0},xt=function(e,n,o,d,u,h,S,m,w,A){var p=o.fontSize,y;Y?y=Y(d,u,p,h,S,A):y=t.color;var k;Z?k=Z(d,u,p,A):k=t.fontWeight;var z;j?z=j(d,u,p,A):z=t.classes,r.forEach(function(O){if(O.getContext){var T=O.getContext("2d"),g=o.mu;T.save(),T.scale(1/g,1/g),T.font=k+" "+(p*g).toString(10)+"px "+t.fontFamily,T.fillStyle=y,T.translate((e+o.gw/2)*i*g,(n+o.gh/2)*i*g),m!==0&&T.rotate(-m),T.textBaseline="middle",T.fillText(d,o.fillTextOffsetX*g,(o.fillTextOffsetY+p*.5)*g),T.restore()}else{var x=document.createElement("span"),b="";b="rotate("+-m/Math.PI*180+"deg) ",o.mu!==1&&(b+="translateX(-"+o.fillTextWidth/4+"px) scale("+1/o.mu+")");var W={position:"absolute",display:"block",font:k+" "+p*o.mu+"px "+t.fontFamily,left:(e+o.gw/2)*i+o.fillTextOffsetX+"px",top:(n+o.gh/2)*i+o.fillTextOffsetY+"px",width:o.fillTextWidth+"px",height:o.fillTextHeight+"px",lineHeight:p+"px",whiteSpace:"nowrap",transform:b,webkitTransform:b,msTransform:b,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};y&&(W.color=y),x.textContent=d;for(var H in W)x.style[H]=W[H];if(w)for(var U in w)x.setAttribute(U,w[U]);z&&(x.className+=z),O.appendChild(x)}})},St=function(e,n,o,d,u){if(!(e>=C||n>=E||e<0||n<0)){if(I[e][n]=!1,o){var h=r[0].getContext("2d");h.fillRect(e*i,n*i,M,M)}J&&(N[e][n]={item:u,dimension:d})}},Mt=function(e,n,o,d,u,h){var S=u.occupied,m=t.drawMask,w;m&&(w=r[0].getContext("2d"),w.save(),w.fillStyle=t.maskColor);var A;if(J){var p=u.bounds;A={x:(e+p[3])*i,y:(n+p[0])*i,w:(p[1]-p[3]+1)*i,h:(p[2]-p[0]+1)*i}}for(var y=S.length;y--;){var k=e+S[y][0],z=n+S[y][1];k>=C||z>=E||k<0||z<0||St(k,z,m,A,h)}m&&w.restore()},Tt=function c(e,n){if(n>20)return null;var o,d,u;Array.isArray(e)?(o=e[0],d=e[1]):(o=e.word,d=e.weight,u=e.attributes);var h=wt(),S=$t(e),m=pt(o,d,h,S);if(!m||et())return!1;if(!t.drawOutOfBound&&!t.shrinkToFit){var w=m.bounds;if(w[1]-w[3]+1>C||w[2]-w[0]+1>E)return!1}for(var A=F+1,p=function(O){var T=Math.floor(O[0]-m.gw/2),g=Math.floor(O[1]-m.gh/2),x=m.gw,b=m.gh;return yt(T,g,x,b,m.occupied)?(xt(T,g,m,o,d,F-A,O[2],h,u,S),Mt(T,g,x,b,m,e),{gx:T,gy:g,rot:h,info:m}):!1};A--;){var y=mt(F-A);t.shuffle&&(y=[].concat(y),jt(y));for(var k=0;k<y.length;k++){var z=p(y[k]);if(z)return z}}return t.shrinkToFit?(Array.isArray(e)?e[1]=e[1]*3/4:e.weight=e.weight*3/4,c(e,n+1)):null},V=function(e,n,o){if(n)return!r.some(function(d){var u=new CustomEvent(e,{detail:o||{}});return!d.dispatchEvent(u)},this);r.forEach(function(d){var u=new CustomEvent(e,{detail:o||{}});d.dispatchEvent(u)},this)},It=function(){var e=r[0];if(e.getContext)C=Math.ceil(e.width/i),E=Math.ceil(e.height/i);else{var n=e.getBoundingClientRect();C=Math.ceil(n.width/i),E=Math.ceil(n.height/i)}if(!!V("wordcloudstart",!0)){B=t.origin?[t.origin[0]/i,t.origin[1]/i]:[C/2,E/2],F=Math.floor(Math.sqrt(C*C+E*E)),I=[];var o,d,u;if(!e.getContext||t.clearCanvas)for(r.forEach(function(g){if(g.getContext){var x=g.getContext("2d");x.fillStyle=t.backgroundColor,x.clearRect(0,0,C*(i+1),E*(i+1)),x.fillRect(0,0,C*(i+1),E*(i+1))}else g.textContent="",g.style.backgroundColor=t.backgroundColor,g.style.position="relative"}),o=C;o--;)for(I[o]=[],d=E;d--;)I[o][d]=!0;else{var h=document.createElement("canvas").getContext("2d");h.fillStyle=t.backgroundColor,h.fillRect(0,0,1,1);var S=h.getImageData(0,0,1,1).data,m=e.getContext("2d").getImageData(0,0,C*i,E*i).data;o=C;for(var w,A;o--;)for(I[o]=[],d=E;d--;){A=i;t:for(;A--;)for(w=i;w--;)for(u=4;u--;)if(m[((d*i+A)*C*i+(o*i+w))*4+u]!==S[u]){I[o][d]=!1;break t}I[o][d]!==!1&&(I[o][d]=!0)}m=h=S=void 0}if(t.hover||t.click){for(J=!0,o=C+1;o--;)N[o]=[];t.hover&&e.addEventListener("mousemove",ft),t.click&&(e.addEventListener("click",Q),e.addEventListener("touchstart",Q),e.addEventListener("touchend",function(g){g.preventDefault()}),e.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),e.addEventListener("wordcloudstart",function g(){e.removeEventListener("wordcloudstart",g),e.removeEventListener("mousemove",ft),e.removeEventListener("click",Q),K=void 0})}u=0;var p,y,k=!0;t.layoutAnimation?t.wait!==0?(p=window.setTimeout,y=window.clearTimeout):(p=window.setImmediate,y=window.clearImmediate):(p=function(g){g()},y=function(){k=!1});var z=function(x,b){r.forEach(function(W){W.addEventListener(x,b)},this)},O=function(x,b){r.forEach(function(W){W.removeEventListener(x,b)},this)},T=function g(){O("wordcloudstart",g),y(q[l])};z("wordcloudstart",T),q[l]=(t.layoutAnimation?p:setTimeout)(function g(){if(!!k){if(u>=t.list.length){y(q[l]),V("wordcloudstop",!1),O("wordcloudstart",T),delete q[l];return}P=new Date().getTime();var x=Tt(t.list[u],0),b=!V("wordclouddrawn",!0,{item:t.list[u],drawn:x});if(et()||b){y(q[l]),t.abort(),V("wordcloudabort",!1),V("wordcloudstop",!1),O("wordcloudstart",T);return}u++,q[l]=p(g,t.wait)}},t.wait)}};It()};$.isSupported=lt;$.minFontSize=ot;if(!$.isSupported)throw new Error("Sorry your browser not support wordCloud");function Jt(s){for(var r=s.getContext("2d"),a=r.getImageData(0,0,s.width,s.height),l=r.createImageData(a),t=0,v=0,f=0;f<a.data.length;f+=4){var i=a.data[f+3];if(i>128){var M=a.data[f]+a.data[f+1]+a.data[f+2];t+=M,++v}}for(var R=t/v,f=0;f<a.data.length;f+=4){var M=a.data[f]+a.data[f+1]+a.data[f+2],i=a.data[f+3];i<128||M>R?(l.data[f]=0,l.data[f+1]=0,l.data[f+2]=0,l.data[f+3]=0):(l.data[f]=255,l.data[f+1]=255,l.data[f+2]=255,l.data[f+3]=255)}r.putImageData(l,0,0)}Ot(function(s,r){s.eachSeriesByType("wordCloud",function(a){var l=Dt(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),t=a.get("keepAspect"),v=a.get("maskImage"),f=v?v.width/v.height:1;t&&Kt(l,f);var i=a.getData(),M=document.createElement("canvas");M.width=l.width,M.height=l.height;var R=M.getContext("2d");if(v)try{R.drawImage(v,0,0,M.width,M.height),Jt(M)}catch(F){console.error("Invalid mask image"),console.error(F.toString())}var D=a.get("sizeRange"),X=a.get("rotationRange"),I=i.getDataExtent("value"),C=Math.PI/180,E=a.get("gridSize");$(M,{list:i.mapArray("value",function(F,P){var Y=i.getItemModel(P);return[i.getName(P),Y.get("textStyle.fontSize",!0)||Lt(F,I,D),P]}).sort(function(F,P){return P[1]-F[1]}),fontFamily:a.get("textStyle.fontFamily")||a.get("emphasis.textStyle.fontFamily")||s.get("textStyle.fontFamily"),fontWeight:a.get("textStyle.fontWeight")||a.get("emphasis.textStyle.fontWeight")||s.get("textStyle.fontWeight"),gridSize:E,ellipticity:l.height/l.width,minRotation:X[0]*C,maxRotation:X[1]*C,clearCanvas:!v,rotateRatio:1,rotationStep:a.get("rotationStep")*C,drawOutOfBound:a.get("drawOutOfBound"),shrinkToFit:a.get("shrinkToFit"),layoutAnimation:a.get("layoutAnimation"),shuffle:!1,shape:a.get("shape")});function B(F){var P=F.detail.item;F.detail.drawn&&a.layoutInstance.ondraw&&(F.detail.drawn.gx+=l.x/E,F.detail.drawn.gy+=l.y/E,a.layoutInstance.ondraw(P[0],P[1],P[2],F.detail.drawn))}M.addEventListener("wordclouddrawn",B),a.layoutInstance&&a.layoutInstance.dispose(),a.layoutInstance={ondraw:null,dispose:function(){M.removeEventListener("wordclouddrawn",B),M.addEventListener("wordclouddrawn",function(F){F.preventDefault()})}}})});Pt(function(s){var r=(s||{}).series;!Wt(r)&&(r=r?[r]:[]);var a=["shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];gt(r,function(t){if(t&&t.type==="wordCloud"){var v=t.textStyle||{};l(v.normal),l(v.emphasis)}});function l(t){t&&gt(a,function(v){t.hasOwnProperty(v)&&(t["text"+Bt(v)]=t[v])})}});function Kt(s,r){var a=s.width,l=s.height;a>l*r?(s.x+=(a-l*r)/2,s.width=l*r):(s.y+=(l-a/r)/2,s.height=a/r)}const Qt={id:"blog-tags",class:"wh100"},ie=Xt({__name:"tags",setup(s){const r=qt(),a=Zt();let l={backgroundColor:"#fff",series:[{type:"wordCloud",gridSize:20,sizeRange:[14,60],rotationRange:[-45,0,45,90],textStyle:{color:function(){return"rgb("+Math.round(Math.random()*255)+", "+Math.round(Math.random()*255)+", "+Math.round(Math.random()*255)+")"}},left:"center",top:"center",right:null,bottom:null,width:"100%",height:"100%"}]};return Yt(()=>{let t=document.getElementById("blog-tags"),v=_t(t);v.on("click",f=>{r.push({path:"/articles",query:{tag:f.data.name}})}),v.showLoading(),Vt(a.path+"/statistics").then(f=>{v.hideLoading(),l.series[0].data=f.data,v.setOption(l)})}),(t,v)=>(Gt(),Ht("div",Qt))}});export{ie as default};
